---
phase: 02-code-generation-engine
plan: 05
type: execute
wave: 3
depends_on: ["02-03", "02-04"]
files_modified:
  - skills/kui-design/SKILL.md
  - skills/kui-design/commands/generate.md
autonomous: true

must_haves:
  truths:
    - "User invokes :generate and is prompted to search for patterns"
    - "Pattern search results display with numbered selection"
    - "Selected pattern generates code for auto-detected framework"
    - "Generated code displays with syntax highlighting and copies to clipboard"
  artifacts:
    - path: "skills/kui-design/SKILL.md"
      provides: "Main skill definition for KUI Design"
      contains: "kui-design"
    - path: "skills/kui-design/commands/generate.md"
      provides: ":generate sub-command definition"
      contains: "generate"
  key_links:
    - from: "skills/kui-design/commands/generate.md"
      to: ".knowledge/generator"
      via: "code references"
      pattern: "\\.knowledge/generator"
    - from: "skills/kui-design/commands/generate.md"
      to: ".knowledge/lib"
      via: "pattern search"
      pattern: "searchPatterns|filterByCategory"
---

<objective>
Create the KUI Design skill with :generate sub-command that wires together pattern search, code generation, and output.

Purpose: INT-03 requires :generate sub-command for code generation. This integrates all Phase 2 components into a usable Claude Code skill interface.
Output: Skill definition (SKILL.md) and generate command (commands/generate.md) files.
</objective>

<execution_context>
@/Users/khairul/.claude/get-shit-done/workflows/execute-plan.md
@/Users/khairul/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-code-generation-engine/02-RESEARCH.md
@.knowledge/lib/index.ts
@.knowledge/generator/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create KUI Design skill structure</name>
  <files>skills/kui-design/SKILL.md</files>
  <action>
    Create skills/kui-design/ directory structure.

    Create SKILL.md with frontmatter and content:

    ```markdown
    ---
    name: kui-design
    description: Generate beautiful UI code from curated design patterns. Use this skill when the user asks to "generate a component", "get pattern code", "find UI pattern", or wants to apply design patterns to their frontend work. Provides pattern-based code generation with framework auto-detection.
    version: 0.1.0
    ---

    # KUI Design

    Generate beautiful, elegant UI code from curated design patterns.

    ## Overview

    KUI Design maintains a knowledge base of high-quality design patterns extracted from hand-picked websites. Unlike generic AI code generation, patterns come from curated sources ensuring beautiful, production-ready output.

    ## When This Skill Applies

    This skill activates when the user's request involves:
    - Generating UI component code from patterns
    - Finding design patterns for specific UI elements
    - Applying curated design principles to frontend work
    - Getting code snippets for layouts, forms, navigation, etc.

    ## Available Sub-Commands

    - **:generate** — Search patterns and generate framework-specific code
    - **:analyze** — Extract patterns from a website URL (Phase 3)

    ## Pattern Categories

    - **layout** — Grid systems, flexbox, responsive layouts
    - **forms** — Inputs, validation, form patterns
    - **navigation** — Navbars, menus, breadcrumbs
    - **micro-interactions** — Hover effects, transitions, feedback
    - **data-display** — Tables, cards, stats
    - **feedback** — Toasts, loaders, skeletons
    - **authentication** — Login forms, auth flows

    ## Framework Support

    Auto-detects project framework from package.json:
    - React (JSX/TSX)
    - Vue (SFC)
    - Svelte
    - Vanilla (CSS/HTML)

    ## Knowledge Base

    Patterns stored in `.knowledge/patterns/` with:
    - Design principles (the "why")
    - Code examples (the "how")
    - Accessibility notes
    - Framework compatibility
    ```
  </action>
  <verify>
    - File exists at skills/kui-design/SKILL.md
    - Frontmatter includes name, description, version
    - Content describes skill purpose and capabilities
  </verify>
  <done>KUI Design skill definition created with overview, categories, and framework support</done>
</task>

<task type="auto">
  <name>Task 2: Create :generate sub-command</name>
  <files>skills/kui-design/commands/generate.md</files>
  <action>
    Create skills/kui-design/commands/ directory.

    Create generate.md with command definition:

    ```markdown
    ---
    name: generate
    description: Generate code from a design pattern. Searches patterns, lets user select, generates framework-specific code with syntax highlighting, and copies to clipboard.
    ---

    # :generate Command

    Generate framework-specific code from curated design patterns.

    ## Usage

    ```
    /kui-design:generate [search terms]
    ```

    ## Workflow

    ### 1. Search Patterns

    Search the pattern knowledge base using provided terms or prompt user for search:

    ```typescript
    import { searchPatterns, filterByCategory, filterByFramework } from '.knowledge/lib';

    // Search by tags
    const results = await searchPatterns({
      tags: ['grid', 'responsive'],
      category: 'layout'  // optional
    });
    ```

    ### 2. Present Results

    Display matching patterns with numbered selection:

    ```
    Found 3 patterns matching "grid responsive":

    1. CSS Grid System
       Category: layout | Tags: grid, responsive, 12-column
       Frameworks: react, vue, svelte, vanilla

    2. Responsive Card Grid
       Category: layout | Tags: grid, cards, responsive
       Frameworks: react, vue, svelte, vanilla

    3. Flexbox Centering
       Category: layout | Tags: flexbox, centering, responsive
       Frameworks: react, vue, svelte, vanilla

    Select pattern (1-3):
    ```

    ### 3. Detect Framework

    Auto-detect project framework from package.json:

    ```typescript
    import { detectFramework } from '.knowledge/generator';

    const framework = await detectFramework();
    // Returns: 'react' | 'vue' | 'svelte' | 'vanilla'
    ```

    ### 4. Generate Code

    Compile pattern through framework template:

    ```typescript
    import { generateCode, outputCode } from '.knowledge/generator';

    const code = generateCode(selectedPattern, framework);
    await outputCode(code, framework);
    ```

    ### 5. Output

    Display syntax-highlighted code preview and copy to clipboard:

    ```
    ──────────────────────────────────────────────────
    /**
     * CSS Grid System
     *
     * Design Principles:
     * - Use CSS Grid for two-dimensional layouts
     * - Define explicit grid areas for complex layouts
     * ...
     */

    const Grid = ({ children, cols = 12 }) => (
      <div className={`grid grid-cols-${cols} gap-4`}>
        {children}
      </div>
    );
    ──────────────────────────────────────────────────
    ✓ Copied to clipboard
    ```

    ## Options

    - `--framework <name>` — Override auto-detected framework
    - `--category <name>` — Filter search to specific category
    - `--list` — List all available patterns

    ## Examples

    ```bash
    # Search and generate
    /kui-design:generate button hover

    # Filter by category
    /kui-design:generate --category forms input

    # Force specific framework
    /kui-design:generate --framework vue card

    # List all patterns
    /kui-design:generate --list
    ```

    ## Error Handling

    - No patterns found: Suggest broader search or list categories
    - Clipboard unavailable: Display code for manual copy
    - Framework not detected: Default to vanilla, suggest specifying
    ```
  </action>
  <verify>
    - File exists at skills/kui-design/commands/generate.md
    - Frontmatter includes name and description
    - Content includes workflow, code examples, and options
  </verify>
  <done>:generate command created with full workflow documentation and code references</done>
</task>

<task type="auto">
  <name>Task 3: Verify skill structure and integration</name>
  <files>None (verification only)</files>
  <action>
    Verify complete skill structure:

    1. Check directory structure:
       ```
       skills/
       └── kui-design/
           ├── SKILL.md
           └── commands/
               └── generate.md
       ```

    2. Verify SKILL.md:
       - Has valid frontmatter (name, description, version)
       - Lists :generate command
       - Documents pattern categories
       - Explains framework support

    3. Verify generate.md:
       - Has valid frontmatter
       - References correct imports from .knowledge/lib and .knowledge/generator
       - Documents complete workflow

    4. Integration check:
       - Imports in generate.md match actual exports from:
         - .knowledge/lib/index.ts (searchPatterns, filterByCategory)
         - .knowledge/generator/index.ts (detectFramework, generateCode, outputCode)

    Log verification results.
  </action>
  <verify>
    - ls -la skills/kui-design/ shows SKILL.md
    - ls -la skills/kui-design/commands/ shows generate.md
    - All referenced imports exist in actual module exports
  </verify>
  <done>Skill structure verified with correct file layout and valid import references</done>
</task>

</tasks>

<verification>
- skills/kui-design/SKILL.md exists with valid content
- skills/kui-design/commands/generate.md exists with workflow
- Skill describes pattern-based code generation
- Command references correct module paths
- All documented imports match actual exports
</verification>

<success_criteria>
- KUI Design skill is discoverable by Claude Code
- :generate command documents complete workflow
- Code references in documentation are accurate
- Skill structure follows Claude Code plugin conventions
- User can understand how to use :generate from documentation
</success_criteria>

<output>
After completion, create `.planning/phases/02-code-generation-engine/02-05-SUMMARY.md`
</output>
